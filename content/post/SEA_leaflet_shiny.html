---
title: "Leaflet and Shiny"
author: "Robert Schlegel"
date: "2020-02-23"
output: html_document
runtime: shiny
weight: 8
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet/leaflet.js"></script>
<link href="/rmarkdown-libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="/rmarkdown-libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="/rmarkdown-libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-binding/leaflet.js"></script>
<script src="/rmarkdown-libs/leaflet-providers/leaflet-providers.js"></script>
<script src="/rmarkdown-libs/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>
<link href="/rmarkdown-libs/leaflet-markercluster/MarkerCluster.css" rel="stylesheet" />
<link href="/rmarkdown-libs/leaflet-markercluster/MarkerCluster.Default.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-markercluster/leaflet.markercluster.js"></script>
<script src="/rmarkdown-libs/leaflet-markercluster/leaflet.markercluster.freezable.js"></script>
<script src="/rmarkdown-libs/leaflet-markercluster/leaflet.markercluster.layersupport.js"></script>


<div id="section-objectives" class="section level2">
<h2>Objectives</h2>
<p>There are <em>a lot</em> of ways to visualise data, with more and more different options being added every day. It can be hard to tell when getting started which of these options are worth us investing our time in, and which are just passing gimmicks. Some of the important ways we measure the use of a tool is the clarity with which it allows us to communicate, the interactiveness that it offers users, or by simply standing the test of time. As all of you have hopefully already seen for yourselves, R offers us two of these three things. Through <strong><code>ggplot2</code></strong> we are able to create clear and concise graphics to communicate with, and the R language is about to have it’s 20th birthday, so it is safe to say it is here to stay. But what about interactiveness in R? Over the last few years the R community has been rapidly expanding on this and now it is safe to say that R is also a very interactive language.</p>
<p>During this workshop we are first going to learn how to plot some of the SEA data from a previous cruise on an interactive <strong><code>leaflet</code></strong> map. Once we are happy with that we will move on to how to create a <strong><code>Shiny</code></strong> app that allows us to choose how we visualise the SEA cruise data. We will wrap things up by combining <strong><code>leaflet</code></strong> and <strong><code>Shiny</code></strong> to give us a map where we can choose how to visualise the data.</p>
<p>Before we get started let’s make sure we are all able to load the following libraries. If any of these give us errors we may need to install the packages first. This will likely be the case with <strong><code>leaflet</code></strong> and <strong><code>Shiny</code></strong> as we haven’t encountered these yet.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.2.1     ✓ purrr   0.3.3
## ✓ tibble  2.1.3     ✓ dplyr   0.8.3
## ✓ tidyr   1.0.0     ✓ stringr 1.4.0
## ✓ readr   1.3.1     ✓ forcats 0.4.0</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(leaflet)
library(shiny)
library(RColorBrewer)</code></pre>
<p>Now we load the data we will use for the rest of this workshop. Note that you will need to change the file pathway to match where this file is on your computer.</p>
<pre class="r"><code>df &lt;- read_csv(&quot;~/Documents/SEA/S285_OC/dcv/R/classes/data/S258_hourly.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   dttm = col_datetime(format = &quot;&quot;),
##   lon = col_double(),
##   lat = col_double(),
##   temp = col_double(),
##   sal = col_double(),
##   fluor = col_double(),
##   wind_sp = col_double(),
##   wind_dir = col_double()
## )</code></pre>
</div>
<div id="section-leaflet" class="section level2">
<h2>Leaflet</h2>
<p>There are many great resources <a href="https://rstudio.github.io/leaflet/">online</a> to read up on to learn more about <strong><code>leaflet</code></strong>. For the purposes of this workshop it is most important that we know that <strong><code>leaflet</code></strong> is not originally an R package. It is it’s own library from the JavaScript language. But don’t worry, some kind people have figured out how to port <strong><code>leaflet</code></strong> into R so that we can get all of the benefits of using JavaScript without having to learn a second language. One of the nice things about <strong><code>leaflet</code></strong> is that it works with static HTML documents, like the one we are reading now. This means that we can provide people consuming our visuals with the feel of an interactive app without the need to be hosting the HTML on an active server, like Amazon Web Service (AWS).</p>
<p>Before we go through the basic <strong><code>leaflet</code></strong> example below, let’s make sure we are all familiar with the pipe operator <code>%&gt;%</code>. This weird looking emoji is used to connect lines of code together into one chunk. So instead of needing to write a bunch of functions inside of each other in crazy complicated ways we can instead write out our code almost like we would a paragraph in English for normal humans. The short cut for <code>%&gt;%</code> is <code>ctrl + shift + m</code>. With a <strong><code>ggplot2</code></strong> figure we always start with the <code>ggplot()</code> function, and the same goes for <strong><code>leaflet</code></strong> always starting with the <code>leaflet()</code> function.</p>
<pre class="r"><code>leaflet(data = df) %&gt;% 
  addTiles() %&gt;%
  addMarkers(~lon, ~lat, label = ~as.character(temp))</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[-43.591535,-43.5793166666667,-43.5868233333333,-43.56721,-43.546065,-43.5197433333333,-43.5014833333333,-43.4728033333333,-43.44571,-43.4238683333333,-43.41504,-43.408675,-43.4000733333333,-43.4017516666667,-43.4068283333333,-43.4040183333333,-43.396855,-43.39211,-43.3858433333333,-43.3823033333333,-43.37801,-43.3791316666667,-43.38287,-43.3781783333333,-43.3644616666667,-43.3579083333333,-43.3349666666667,-43.29299,-43.2446433333333,-43.1804383333333,-43.15089,-43.17568,-43.2002933333333,-43.194915,-43.2238133333333,-43.2552283333333,-43.2875783333333,-43.3229333333333,-43.36069,-43.4030816666667,-43.4547416666667,-43.49322,-43.506795,-43.52428,-43.5662166666667,-43.5876433333333,-43.5027416666667,-43.4154583333333,-43.3390816666667,-43.34457,-43.363605,-43.3788783333333,-43.3918233333333,-43.4016166666667,-43.4087516666667,-43.4139533333333,-43.4319833333333,-43.4658033333333,-43.479015,-43.4911966666667,-43.5075316666667,-43.5224916666667,-43.541715,-43.5614816666667,-43.5851333333333,-43.6040516666667,-43.6277966666667,-43.6518066666667,-43.670625,-43.6854783333333,-43.7008816666667,-43.7205983333333,-43.7412483333333,-43.7553133333333,-43.7683433333333,-43.7844283333333,-43.8002933333333,-43.81384,-43.8256366666667,-44.0844883333333,-44.0505533333333,-44.0184216666667,-43.98309,-43.9420983333333,-43.9316083333333,-43.9461766666667,-43.980885,-44.0480733333333,-44.0624333333333,-44.0609883333333,-44.11623,-44.1734766666667,-44.1633866666667,-44.1429583333333,-44.1265616666667,-44.1150683333333,-44.106185,-44.097055,-44.1005566666667,-44.097335,-44.0937466666667,-44.0793066666667,-44.0771283333333,-44.06812,-44.05528,-44.0426783333333,-44.0384583333333,-44.0312583333333,-44.02015,-43.9915133333333,-43.9810183333333,-43.9585966666667,-43.9270133333333,-43.8624966666667,-43.7841133333333,-43.7476516666667,-43.739025,-43.69237,-43.64761,-43.59813,-43.55443,-43.503865,-43.4509133333333,-43.39451,-43.35396,-43.32477,-43.31763,-43.2950833333333,-43.264945,-43.2356666666667,-43.2122933333333,-43.174465,-43.1350483333333,-43.0983116666667,-43.0643516666667,-43.0306116666667,-43.0005666666667,-43.0017366666667,-43.012445,-43.0256616666667,-43.0390783333333,-43.0540433333333,-43.06323,-43.0746516666667,-43.05813,-43.04307,-43.0309883333333,-43.0294316666667,-43.04094,-43.044425,-43.0424566666667,-43.032645,-43.01942,-43.0110583333333,-42.9957683333333,-42.9810416666667,-42.9723616666667,-42.9688766666667,-42.9620866666667,-42.97973,-42.9882883333333,-42.97929,-42.9744983333333,-42.969035,-42.95733,-42.9487666666667,-42.93547,-42.9180183333333,-42.90146,-42.8652733333333,-42.8887966666667,-42.9434566666667,-42.982315,-42.989605,-42.9674433333333,-42.987385,-43.0039116666667,-42.9996533333333,-42.9902683333333,-42.9750116666667,-42.948805,-42.920265,-42.88705,-42.8621066666667,-42.8392,-42.82073,-42.7825,-42.7372416666667,-42.6847,-42.6340366666667,-42.604805,-42.5597316666667,-42.505855,-42.43706,-42.3842966666667,-42.3420766666667,-42.31207,-42.3024166666667,-42.2744316666667,-42.23827,-42.1857116666667,-42.14432,-42.1009616666667,-42.0565566666667,-42.0123333333333,-41.962275,-41.91799,-41.898965,-41.8975216666667,-41.8792616666667,-41.832635,-41.7783033333333,-41.7284533333333,-41.6898716666667,-41.64471,-41.602615,-41.5631566666667,-41.5253133333333,-41.4993116666667,-41.5149833333333,-41.57254,-41.5824466666667,-41.5836333333333,-41.5831466666667,-41.593845,-41.5982666666667,-41.6005633333333,-41.5978716666667,-41.5988733333333,-41.59588,-41.5896916666667,-41.5808433333333,-41.5710533333333,-41.5632366666667,-41.55604,-41.5498666666667,-41.54063,-41.5327416666667,-41.5291383333333,-41.528915,-41.5315083333333,-41.5328466666667,-41.530665,-41.531975,-41.5399516666667,-41.539435,-41.53781,-41.5389033333333,-41.5427966666667,-41.543085,-41.5483316666667,-41.5432233333333,-41.5350466666667,-41.5245933333333,-41.5232666666667,-41.5232966666667,-41.5257583333333,-41.5223233333333,-41.5083066666667,-41.486815,-41.46507,-41.4484866666667,-41.43196,-41.4119616666667,-41.39236,-41.3720383333333,-41.3531,-41.3442183333333,-41.3439183333333,-41.34119,-41.3190966666667,-41.299955,-41.2824316666667,-41.2637883333333,-41.24143,-41.21495,-41.1555466666667,-41.08353,-41.072635,-41.0609866666667,-40.9830416666667,-40.8618466666667,-40.7475333333333,-40.62653,-40.5029933333333,-40.3749966666667,-40.2493583333333,-40.1281416666667,-39.9988566666667,-39.8752433333333,-39.761445,-39.643475,-39.561515,-39.5144733333333,-39.426375,-39.3413866666667,-39.2485616666667,-39.1550416666667,-39.0617566666667,-38.9806983333333,-38.897875,-38.80601,-38.7138716666667,-38.6792866666667,-38.6650633333333,-38.62756,-38.5594666666667,-38.4850966666667,-38.4239433333333,-38.37143,-38.3043933333333,-38.24651,-38.1994216666667,-38.1468716666667,-38.0950066666667,-38.0510233333333,-38.029675,-37.9864916666667,-37.9456766666667,-37.9056916666667,-37.8636016666667,-37.82631,-37.7921083333333,-37.75151,-37.7102916666667,-37.670925,-37.6819016666667,-37.6948033333333,-37.6771933333333,-37.613235,-37.5500483333333,-37.4845316666667,-37.4217133333333,-37.3586566666667,-37.30154,-37.23979,-37.1673366666667,-37.0954333333333,-37.0566466666667,-37.0320383333333,-36.99797,-36.9480383333333,-36.89528,-36.80887,-36.721815,-36.6335733333333,-36.53811,-36.461195,-36.3901933333333,-36.3227466666667,-36.3002583333333,-36.295845,-36.270825,-36.204785,-36.15193,-36.0966,-36.0268083333333,-35.9559366666667,-35.8812733333333,-35.8136683333333,-35.7418833333333,-35.6754316666667,-35.6051133333333,-35.533365,-35.4787533333333,-35.435405,-35.3399233333333,-35.2443466666667,-35.1499,-35.0616783333333,-34.9653633333333,-34.8667133333333,-34.76994,-34.6711633333333,-34.629205,-34.6286066666667,-34.6082616666667,-34.5132766666667,-34.410235,-34.3084816666667,-34.210525,-34.1091183333333,-34.00618,-33.904455,-33.805985,-33.7084266666667,-33.6250133333333,-33.6052533333333,-33.5733966666667,-33.4705616666667,-33.3662983333333,-33.2632266666667,-33.1768416666667,-33.0909016666667,-33.0083083333333,-32.92904,-32.8480533333333,-32.767275,-32.73936,-32.7433433333333,-32.7085033333333,-32.6370866666667,-32.5613616666667,-32.4824766666667,-32.4042016666667,-32.3374983333333,-32.273165,-32.208915,-32.1469733333333,-32.0872033333333,-32.0255166666667,-31.9646383333333,-31.9019,-31.9331316666667,-31.9226,-31.8780616666667,-31.8224416666667,-31.7617483333333,-31.7152933333333,-31.677925,-31.7067066666667,-31.7406633333333,-31.7724883333333,-31.7889683333333,-31.807695,-31.8343366666667,-31.86286,-31.8995516666667,-31.919175,-31.9556983333333,-31.96766,-31.9540483333333,-31.9456483333333,-31.9236266666667,-31.8342316666667,-31.75193,-31.7364483333333,-31.7626916666667,-31.7102066666667,-31.6577266666667,-31.6072466666667,-31.5498516666667,-31.4949083333333,-31.43214,-31.3679233333333,-31.3176733333333,-31.298745,-31.3156966666667,-31.3294416666667,-31.3191133333333,-31.2943833333333,-31.280195,-31.2632716666667,-31.2497466666667,-31.2235966666667,-31.2030383333333,-31.1846366666667,-31.1542066666667,-31.1298966666667,-31.1049116666667,-31.0968816666667,-31.0833916666667,-31.0545216666667,-31.05048,-31.0437116666667,-31.0352316666667,-31.0250333333333,-30.9760033333333,-30.9242416666667,-30.87256,-30.8163516666667,-30.7800216666667,-30.7694233333333,-30.7478166666667,-30.7257016666667,-30.6582066666667,-30.5934766666667,-30.5284716666667,-30.4625283333333,-30.4006616666667,-30.337665,-30.2695416666667,-30.198695,-30.1249916666667,-30.0520333333333,-30.00395,-29.9195266666667,-29.8358066666667,-29.759085,-29.67633,-29.5873983333333,-29.5294916666667,-29.4783566666667,-29.4237933333333,-29.3727883333333,-29.3551716666667,-29.344365,-29.3195233333333,-29.265115,-29.2026833333333,-29.1392083333333,-29.0696416666667,-29.0007116666667,-28.93686,-28.8682583333333,-28.8061083333333,-28.7560266666667,-28.731675,-28.6921883333333,-28.637765,-28.5814883333333,-28.5285866666667,-28.4573466666667,-28.3792633333333,-28.2997366666667,-28.21569,-28.13557,-28.06272,-27.9991533333333,-27.980885,-27.9574033333333,-27.9264083333333,-27.894225,-27.8640316666667,-27.8346783333333,-27.8044766666667,-27.7631816666667,-27.72544,-27.6904283333333,-27.6444783333333,-27.5883216666667,-27.5785083333333,-27.5698916666667,-27.5314666666667,-27.4961016666667,-27.464145,-27.433865,-27.4073866666667,-27.3777933333333,-27.3462466666667,-27.30942,-27.269275,-27.2334916666667,-27.2167083333333,-27.1946483333333,-27.1423433333333,-27.08232,-27.0106966666667,-26.9341,-26.8513816666667,-26.7794416666667,-26.7019466666667,-26.6229066666667,-26.5497433333333,-26.47894,-26.4868116666667,-26.4928,-26.4369616666667,-26.3501116666667,-26.26822,-26.1951716666667,-26.116705,-26.0403216666667,-25.9628583333333,-25.8860866666667,-25.8129516666667,-25.8027216666667,-25.8056183333333,-25.8051516666667,-25.8241933333333,-25.7555033333333,-25.6714683333333,-25.633855,-25.6068316666667,-25.5164883333333,-25.4241816666667,-25.331045,-25.2367916666667,-25.1372033333333,-25.0421916666667,-24.951525,-24.9613616666667,-24.92676,-24.8589733333333,-24.7730766666667,-24.6744833333333,-24.5839683333333,-24.48683,-24.3883633333333,-24.29068,-24.303685,-24.3115966666667,-24.2978233333333,-24.2186966666667,-24.149785,-24.0862783333333,-24.0210233333333,-23.9557533333333,-23.8864533333333,-23.8239533333333,-23.76299,-23.6916983333333,-23.6389833333333,-23.6745466666667,-23.71363,-23.664505,-23.6117766666667,-23.6022733333333,-23.5972883333333,-23.8444866666667,-23.76984,-23.6882166666667,-23.6091316666667,-23.5241366666667,-23.4388116666667,-23.3524116666667,-23.2499616666667,-23.1525566666667,-23.0673316666667,-22.990025,-22.91278,-22.8280966666667,-22.7381066666667,-22.6407233333333,-22.5326183333333,-22.4203516666667,-22.3042433333333,-22.1906116666667,-22.0777216666667,-21.9416766666667,-21.82421,-21.7064,-21.581725,-21.45911,-21.34219,-21.2311083333333,-21.1196266666667,-21.0153783333333,-20.9095216666667,-20.7893283333333,-20.66957,-20.5502083333333,-20.43563,-20.318735,-20.1980033333333,-20.0716966666667,-19.9419233333333,-19.8156233333333,-19.6874583333333,-19.557565,-19.445725,-19.3448583333333,-19.247915,-19.1467866666667,-19.0490116666667,-18.9558016666667,-18.8615233333333,-18.754595,-18.6213416666667,-18.4816466666667,-18.3430966666667,-18.3425483333333],[172.824395,172.966778333333,173.106246666667,173.247275,173.397586666667,173.502933333333,173.589833333333,173.682078333333,173.73209,173.743066666667,173.894963333333,174.04493,174.209765,174.377486666667,174.546445,174.710738333333,174.858553333333,175.017031666667,175.02909,174.99493,175.123196666667,175.273365,175.41883,175.547483333333,175.56829,175.700271666667,175.842846666667,175.99826,176.133445,176.267123333333,176.352213333333,176.342861666667,176.35139,176.41086,176.543101666667,176.65946,176.776735,176.900991666667,177.02303,177.151686666667,177.280821666667,177.419645,177.429826666667,177.432983333333,177.557456666667,177.675616666667,177.721536666667,177.766796666667,177.805726666667,177.913971666667,178.049308333333,178.19257,178.342016666667,178.487188333333,178.631973333333,178.775986666667,178.856008333333,178.875445,178.978766666667,179.080233333333,179.198021666667,179.32821,179.465173333333,179.604391666667,179.753356666667,179.906618333333,179.938393333333,179.970078333333,-179.919741666667,-179.784791666667,-179.643811666667,-179.496095,-179.373301666667,-179.231548333333,-179.111391666667,-178.981686666667,-178.867823333333,-178.74444,-178.674985,-177.399898333333,-177.235711666667,-177.058166666667,-176.877108333333,-176.696478333333,-176.565455,-176.61404,-176.71882,-176.765348333333,-176.752531666667,-176.72823,-176.706381666667,-176.67631,-176.528068333333,-176.422425,-176.328028333333,-176.221008333333,-176.106306666667,-175.977156666667,-175.830588333333,-175.673373333333,-175.573343333333,-175.48057,-175.342976666667,-175.18024,-175.020893333333,-174.853141666667,-174.687246666667,-174.516083333333,-174.342346666667,-174.172546666667,-174.10099,-174.074693333333,-174.05462,-173.9962,-173.913158333333,-173.812506666667,-173.666836666667,-173.49193,-173.32587,-173.168398333333,-173.027841666667,-172.897796666667,-172.78929,-172.691008333333,-172.604036666667,-172.54835,-172.553921666667,-172.417611666667,-172.275503333333,-172.136016666667,-171.995341666667,-171.860548333333,-171.723995,-171.59294,-171.464996666667,-171.33549,-171.203218333333,-171.174386666667,-171.169095,-171.030751666667,-170.887628333333,-170.748666666667,-170.598343333333,-170.448803333333,-170.297705,-170.126523333333,-169.973643333333,-169.845446666667,-169.798046666667,-169.747158333333,-169.630936666667,-169.481901666667,-169.334545,-169.18837,-169.04736,-168.918626666667,-168.774473333333,-168.618888333333,-168.467113333333,-168.444405,-168.417055,-168.333183333333,-168.179586666667,-168.02005,-167.84618,-167.667293333333,-167.478925,-167.284611666667,-167.09957,-166.957081666667,-166.820338333333,-166.695518333333,-166.571461666667,-166.469293333333,-166.446278333333,-166.334128333333,-166.200523333333,-166.058555,-165.91711,-165.772185,-165.617315,-165.469531666667,-165.322718333333,-165.332993333333,-165.335281666667,-165.361758333333,-165.220006666667,-165.070565,-164.924333333333,-164.781035,-164.690608333333,-164.612968333333,-164.505533333333,-164.379393333333,-164.25365,-164.163316666667,-164.160935,-164.209273333333,-164.168775,-164.097745,-163.966161666667,-163.823595,-163.682548333333,-163.542903333333,-163.393121666667,-163.250431666667,-163.113735,-163.093365,-163.110708333333,-163.061721666667,-162.91384,-162.770608333333,-162.627938333333,-162.504761666667,-162.372208333333,-162.234883333333,-162.09191,-161.952858333333,-161.820351666667,-161.692056666667,-161.604198333333,-161.50578,-161.412855,-161.263741666667,-161.11986,-160.970855,-160.823211666667,-160.669121666667,-160.512373333333,-160.352933333333,-160.196541666667,-160.158403333333,-160.150171666667,-160.064821666667,-159.929738333333,-159.797748333333,-159.667446666667,-159.533536666667,-159.396763333333,-159.257001666667,-159.117251666667,-158.975593333333,-158.83185,-158.70283,-158.681381666667,-158.594688333333,-158.435255,-158.278343333333,-158.123675,-157.968483333333,-157.812036666667,-157.656781666667,-157.516823333333,-157.365858333333,-157.215825,-157.15625,-157.148223333333,-157.104731666667,-157.036376666667,-156.936428333333,-156.82077,-156.700443333333,-156.612823333333,-156.501008333333,-156.39009,-156.266188333333,-156.12943,-156.015478333333,-155.990248333333,-155.94765,-155.821195,-155.684888333333,-155.545265,-155.396973333333,-155.260031666667,-155.116516666667,-154.976383333333,-154.856273333333,-154.813665,-154.784175,-154.785058333333,-154.792181666667,-154.800165,-154.794966666667,-154.806246666667,-154.828641666667,-154.84825,-154.865286666667,-154.888378333333,-154.894371666667,-154.909143333333,-154.920408333333,-154.900308333333,-154.911693333333,-154.910316666667,-154.912206666667,-154.91352,-154.916283333333,-154.911015,-154.906196666667,-154.87866,-154.813978333333,-154.748728333333,-154.723818333333,-154.711996666667,-154.69527,-154.645428333333,-154.581908333333,-154.515325,-154.439966666667,-154.336598333333,-154.230035,-154.132568333333,-154.02853,-153.91963,-153.817123333333,-153.745573333333,-153.684251666667,-153.57481,-153.467045,-153.364288333333,-153.263363333333,-153.15111,-153.04116,-152.937033333333,-152.825275,-152.796095,-152.777518333333,-152.723623333333,-152.602793333333,-152.485883333333,-152.363648333333,-152.24757,-152.137813333333,-152.042656666667,-151.942318333333,-151.85641,-151.789418333333,-151.725231666667,-151.691406666667,-151.660638333333,-151.627893333333,-151.603143333333,-151.58303,-151.560368333333,-151.535555,-151.507426666667,-151.427586666667,-151.33978,-151.253516666667,-151.226306666667,-151.221041666667,-151.193353333333,-151.1074,-151.040538333333,-150.95675,-150.846905,-150.73439,-150.62709,-150.52282,-150.424726666667,-150.327285,-150.23435,-150.145493333333,-150.06557,-150.000373333333,-149.975776666667,-149.951073333333,-149.942046666667,-149.942045,-149.920298333333,-149.901636666667,-149.877586666667,-149.859755,-149.850255,-149.841385,-149.842198333333,-149.864368333333,-149.887298333333,-149.92331,-149.966406666667,-150.00479,-150.047106666667,-150.085701666667,-150.132835,-150.175873333333,-150.222321666667,-150.244185,-150.264853333333,-150.298051666667,-150.327466666667,-150.3731,-150.306128333333,-150.223895,-150.13796,-150.052098333333,-149.962373333333,-149.873745,-149.842578333333,-149.847705,-149.804033333333,-149.708741666667,-149.612896666667,-149.518563333333,-149.432155,-149.352078333333,-149.273735,-149.199185,-149.118951666667,-149.042566666667,-148.969061666667,-148.89991,-148.843103333333,-148.853906666667,-148.87032,-148.905415,-148.950978333333,-148.998965,-149.034185,-149.065555,-149.015905,-148.93291,-148.849463333333,-148.826418333333,-148.789026666667,-148.707548333333,-148.633725,-148.559563333333,-148.554228333333,-148.501528333333,-148.447221666667,-148.35346,-148.254395,-148.202033333333,-148.24723,-148.29695,-148.308431666667,-148.258683333333,-148.332713333333,-148.409191666667,-148.485485,-148.553233333333,-148.625036666667,-148.697175,-148.769653333333,-148.823765,-148.830106666667,-148.809126666667,-148.778671666667,-148.719405,-148.645331666667,-148.556116666667,-148.479488333333,-148.409038333333,-148.3028,-148.211291666667,-148.124695,-148.021636666667,-147.929546666667,-147.818125,-147.749225,-147.708563333333,-147.63194,-147.544338333333,-147.466091666667,-147.38604,-147.279215,-147.233608333333,-147.151673333333,-147.052281666667,-146.951375,-146.893391666667,-146.884738333333,-146.877603333333,-146.856066666667,-146.79085,-146.729863333333,-146.665338333333,-146.602326666667,-146.534775,-146.464573333333,-146.393396666667,-146.32183,-146.250166666667,-146.19329,-146.152161666667,-146.090325,-146.022638333333,-145.952665,-145.884708333333,-145.816228333333,-145.766983333333,-145.721743333333,-145.678501666667,-145.627485,-145.611385,-145.602401666667,-145.606891666667,-145.55279,-145.50635,-145.458455,-145.40999,-145.354283333333,-145.299415,-145.253881666667,-145.204011666667,-145.161608333333,-145.168556666667,-145.193598333333,-145.144461666667,-145.073563333333,-145.006461666667,-145.00055,-145.011115,-145.017078333333,-145.031566666667,-145.015993333333,-144.977026666667,-144.92819,-144.92083,-144.928378333333,-144.842735,-144.755768333333,-144.673635,-144.592648333333,-144.503545,-144.424263333333,-144.349765,-144.287996666667,-144.228905,-144.179295,-144.176305,-144.190708333333,-144.223783333333,-144.274458333333,-144.32235,-144.372001666667,-144.422795,-144.475991666667,-144.530033333333,-144.590315,-144.655033333333,-144.715988333333,-144.728768333333,-144.765905,-144.808848333333,-144.848481666667,-144.893415,-144.943303333333,-145.000415,-145.065168333333,-145.119706666667,-145.174373333333,-145.227191666667,-145.262653333333,-145.299928333333,-145.348675,-145.410305,-145.468981666667,-145.527376666667,-145.58173,-145.642145,-145.703098333333,-145.767356666667,-145.828265,-145.88688,-145.911181666667,-145.919526666667,-145.924531666667,-145.933483333333,-145.959483333333,-145.988956666667,-146.019843333333,-146.049385,-146.08476,-146.117108333333,-146.155101666667,-146.197818333333,-146.240058333333,-146.27931,-146.318026666667,-146.339901666667,-146.363785,-146.393605,-146.428815,-146.46542,-146.498036666667,-146.53579,-146.572631666667,-146.608758333333,-146.629416666667,-146.640335,-146.664616666667,-146.705443333333,-146.741978333333,-146.780848333333,-146.820791666667,-146.858131666667,-146.892016666667,-146.921395,-146.951153333333,-146.984925,-147.017126666667,-147.025918333333,-147.02712,-147.070443333333,-147.119755,-147.19341,-147.270596666667,-147.674713333333,-147.700918333333,-147.735845,-147.767765,-147.81675,-147.866581666667,-147.917891666667,-147.96591,-147.9969,-147.999066666667,-148.015211666667,-148.04738,-148.093318333333,-148.13953,-148.183008333333,-148.203021666667,-148.22354,-148.244946666667,-148.262541666667,-148.279821666667,-148.310775,-148.345613333333,-148.395896666667,-148.456858333333,-148.519085,-148.585608333333,-148.658018333333,-148.734208333333,-148.814468333333,-148.888111666667,-148.927785,-148.966375,-149.014621666667,-149.057066666667,-149.100496666667,-149.133028333333,-149.153471666667,-149.178383333333,-149.217445,-149.262896666667,-149.30599,-149.339235,-149.348943333333,-149.365996666667,-149.37752,-149.396198333333,-149.417963333333,-149.43579,-149.449915,-149.468778333333,-149.488161666667,-149.505108333333,-149.527725],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["17.0558","17.4809","16.9475","15.9562","15.8244","15.2949","15.068","14.5624","14.4309","14.4888","13.7856","14.0036","14.1808","15.8552","15.5019","15.793","16.124","16.8159","16.7533","16.8204","16.4111","15.7734","15.9789","15.9868","15.7928","15.4232","15.1956","16.5219","16.8588","16.2444","15.8651","15.839","16.2959","16.0768","15.7637","16.2075","16.3268","16.4711","16.5638","16.2365","15.8459","16.118","16.2494","16.4018","16.2555","16.3597","16.323","16.2664","16.1665","15.878","16.0305","16.1565","15.9819","15.9947","16.0447","16.145","16.0229","16.3094","15.7565","15.7421","16.078","16.3558","16.4713","16.5417","16.3844","16.3592","16.6125","16.837","17.0158","16.8393","16.8671","17.0597","16.9004","16.5806","16.2675","16.3207","16.3797","16.3711","16.3992","16.3948","16.6274","15.783","15.7725","15.6337","16.1107","15.4874","15.3363","15.406","15.492","15.5283","15.5136","15.5375","15.5528","15.5565","15.5818","15.6292","15.7454","15.6108","15.5176","15.7967","15.9418","15.7597","15.7906","15.9446","15.87","15.815","16.0722","16.0127","15.9539","16.0284","16.0255","16.0462","16.4723","16.1229","16.108","16.1355","16.1649","16.045","16.4355","16.2065","15.8956","16.5673","16.4798","16.3637","16.1569","16.208","16.2499","16.2215","16.2317","16.2021","16.3228","16.3846","16.426","16.3996","16.4952","16.6781","16.406","16.4171","16.4429","16.5642","16.5983","16.5054","16.5031","16.497","16.4048","16.3333","16.342","16.4796","16.4364","16.3994","16.3068","16.2533","15.7126","16.1228","15.5978","15.5851","15.5213","15.6111","15.5816","15.6242","15.5946","15.7","15.7296","16.0254","15.9884","15.9025",null,"15.8223","16.0843","16.0385","15.9598","15.8148","15.8998","15.7524",null,"15.2501","15.1401","15.1357","15.0128","14.9506","14.9638","14.9523","15.142","15.0771","15.036","14.6807","14.9337","15.0104","15.0137","14.8532","15.2971","15.8014","16.0875","16.1393","16.0357","16.1225","16.1252","16.126","15.7506","15.7075","15.8138","15.72","15.6125","15.38","15.3666","15.3096","15.4392","15.5793","15.597","15.6403","15.7908","16.0201","16.0038","15.6498","15.707","15.9548","16.3076","16.3716","16.5729","16.5656","16.4358","16.4247","16.1984","16.0296","15.925","16.0084","15.9683","16.0417","16.066","15.9457","16.0098","16.0884","16.1693","16.2669","16.3824","16.5433","16.4423","16.6197","16.5709","16.5967","16.4778","16.3945","16.3628","16.3664","16.3504","16.4659","16.4127","16.4648","16.7924","16.8611","16.8199","16.8007","16.7861","16.7386","16.6493","16.7715","16.8209","16.9723","17.143","16.8581","16.985","16.7017","16.6866","16.603","16.6166","16.5898","16.6099","16.5273","16.5223","16.4528","16.5009","16.5053","16.4338","16.4182","16.3536","16.3655","16.3599","15.9058","15.7841",null,"15.6898","15.8465","16.186","16.4622","16.3204","16.0896","16.3741","17.6756","17.7722","18.0288","18.1324","18.2083","18.2146","18.0833","18.0874","18.0626","17.9805","18.0292","18.0085","17.9345","18.0251","18.2193","18.2578","18.1074","18.1095","18.0712","18.064","18.0805","17.7817","17.7296","17.7099","17.6627","17.3669","17.2754","17.322","17.4981","17.2503","17.3274","17.2932","17.4861","17.4113","17.8788","17.8801","17.8462","17.8671","17.7397","17.7299","17.799","17.7935","17.7731","17.7207","17.7202","17.8154","17.8378","17.7466","17.7933","17.8523","17.8476","17.9399","17.9179",null,null,null,null,null,null,null,null,"18.9656","18.9786","18.9726","19.02","19.1645","19.3707","19.521","19.5124","19.5048","19.5094","19.4485","19.4121","19.3665","19.3268","19.2681","19.0804","19.1213","19.1119","19.0643","19.5948","19.921","20.214","20.2592","20.2062","20.3359","20.3249","20.1187","20.2145","20.2805","20.3625","20.4154","20.4792","20.3826","20.7764","20.7981","20.6199","20.6303","20.6618","20.6667","20.6084","20.5724","20.5345","20.4661","20.5969","20.4915","20.4684","20.3849","20.3333","20.3405","20.3614","20.4428","20.5347","20.6517","20.9007","20.8864","21.0112","21.1875","21.3445","21.5887","21.3922","21.427","21.4229","21.1215","20.9857","20.972","20.8701","20.9118","20.8894","21.0083","21.1029","21.0537","21.056","21.0778","21.1312","20.9787","21.0076","21.2842","21.2361","21.1667","21.5209","21.525","21.412","21.314","21.3148","21.1964","21.2039","21.1996","21.3962","21.4804","21.3416","21.7506","21.9378","21.2999","21.2993","20.9306","20.8934","20.9785","21.0006","21.0253","21.044","21.0721","21.0462","21.0186","21.019","20.9969","20.975","21.0699","20.9711","22.2169","21.8883","22.1223","22.1163","22.384","22.0164","21.4023","21.6017","21.6538","21.5989","21.8806","21.9284","22.1609","22.2029","22.1736","22.1555","22.1582","22.1676","22.1862","21.979","22.2268","22.2439","22.5249","23.1483","23.341","23.3058","23.2794","23.2471","23.0297","22.9899","22.9723","22.7119","22.7018","22.5513","22.5117","22.645","22.6101","22.599","22.6295","22.7599","22.8328","22.8366","22.8734","22.8791","22.9239","22.8737","22.7347","23.5111","23.5161","23.5942","23.5568","23.5495","23.5309","23.6858","23.6313","23.8256","24.3641","24.4657","24.572","24.6414","24.6701","24.6335","24.5758","24.6418","24.6833","24.6237","24.6473","24.6662","24.6231","24.536","24.568","24.5763","24.5086","24.4734","24.4094","24.3964","24.3592","24.3418","24.3262","24.4007","24.3698","24.2951","24.2696","24.2997","24.2736","24.2538","24.2689","24.2713","24.3577","24.3719","24.3675","24.3354","24.3598","24.5045","24.9243","24.8729","25.0585","25.1681","24.9039","24.7933","25.0118","24.7635","24.8485","24.868","24.8545","24.6975","24.6381","24.7255","24.6505","24.6709","24.7444","24.8143","24.8196","24.8143","24.8069","24.7656","24.7748","24.7511","24.8347","24.9254","24.8353","24.7546","24.731","24.8921","24.9033","25.0135","25.1963","25.2068","25.0829","25.4818","25.6204","25.6213","25.6533","25.7499","25.7825","25.8199","25.8119","26.2995","26.2965","26.3616","26.4438","26.4667","26.4553","26.5211","26.7546","26.7259","26.7413","26.7156","26.7273","26.7664","26.8985","26.9527","27.0126","26.5714","26.7231","26.783","26.954","26.9742","27.1848","27.06","27.0897","27.1447","27.1177","26.9142","26.9746","27.0125","27.0188","26.9763","27.0507","27.2398","27.479","27.6959","27.8643","27.8366","27.9969","28.2223","28.2295","28.2584","28.2986","28.3124","28.2732","28.0873","28.0192","28.0723","28.0658","28.0899","28.0667","27.9104","28.0085","27.9981","27.983","28.2846","28.3138","28.5676","28.7198","28.5792","28.851","28.8813","28.8846","28.8854","28.8405","28.9683","28.9565","29.0367","29.0303","28.9554"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-44.1734766666667,-18.3425483333333],"lng":[-179.919741666667,179.970078333333]}},"evals":[],"jsHooks":[]}</script>
<p>What do we think the above three lines of code are doing? Why are the data split like this? It looks like we are going to need to do some data wrangling. Lucky for us the <strong><code>leaflet</code></strong> package plays nice with all of the <strong><code>tidyverse</code></strong> functions. Below we can see how to pipe (<code>%&gt;%</code>) our data wrangling straight into our map. We also can see how we go about changing the map background.</p>
<pre class="r"><code>df %&gt;% 
  mutate(lon = if_else(lon &lt; 0, lon+360, lon)) %&gt;% 
  leaflet() %&gt;% 
  addProviderTiles(providers$Esri.OceanBasemap) %&gt;% 
  addMarkers(~lon, ~lat, label = ~as.character(temp))</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[-43.591535,-43.5793166666667,-43.5868233333333,-43.56721,-43.546065,-43.5197433333333,-43.5014833333333,-43.4728033333333,-43.44571,-43.4238683333333,-43.41504,-43.408675,-43.4000733333333,-43.4017516666667,-43.4068283333333,-43.4040183333333,-43.396855,-43.39211,-43.3858433333333,-43.3823033333333,-43.37801,-43.3791316666667,-43.38287,-43.3781783333333,-43.3644616666667,-43.3579083333333,-43.3349666666667,-43.29299,-43.2446433333333,-43.1804383333333,-43.15089,-43.17568,-43.2002933333333,-43.194915,-43.2238133333333,-43.2552283333333,-43.2875783333333,-43.3229333333333,-43.36069,-43.4030816666667,-43.4547416666667,-43.49322,-43.506795,-43.52428,-43.5662166666667,-43.5876433333333,-43.5027416666667,-43.4154583333333,-43.3390816666667,-43.34457,-43.363605,-43.3788783333333,-43.3918233333333,-43.4016166666667,-43.4087516666667,-43.4139533333333,-43.4319833333333,-43.4658033333333,-43.479015,-43.4911966666667,-43.5075316666667,-43.5224916666667,-43.541715,-43.5614816666667,-43.5851333333333,-43.6040516666667,-43.6277966666667,-43.6518066666667,-43.670625,-43.6854783333333,-43.7008816666667,-43.7205983333333,-43.7412483333333,-43.7553133333333,-43.7683433333333,-43.7844283333333,-43.8002933333333,-43.81384,-43.8256366666667,-44.0844883333333,-44.0505533333333,-44.0184216666667,-43.98309,-43.9420983333333,-43.9316083333333,-43.9461766666667,-43.980885,-44.0480733333333,-44.0624333333333,-44.0609883333333,-44.11623,-44.1734766666667,-44.1633866666667,-44.1429583333333,-44.1265616666667,-44.1150683333333,-44.106185,-44.097055,-44.1005566666667,-44.097335,-44.0937466666667,-44.0793066666667,-44.0771283333333,-44.06812,-44.05528,-44.0426783333333,-44.0384583333333,-44.0312583333333,-44.02015,-43.9915133333333,-43.9810183333333,-43.9585966666667,-43.9270133333333,-43.8624966666667,-43.7841133333333,-43.7476516666667,-43.739025,-43.69237,-43.64761,-43.59813,-43.55443,-43.503865,-43.4509133333333,-43.39451,-43.35396,-43.32477,-43.31763,-43.2950833333333,-43.264945,-43.2356666666667,-43.2122933333333,-43.174465,-43.1350483333333,-43.0983116666667,-43.0643516666667,-43.0306116666667,-43.0005666666667,-43.0017366666667,-43.012445,-43.0256616666667,-43.0390783333333,-43.0540433333333,-43.06323,-43.0746516666667,-43.05813,-43.04307,-43.0309883333333,-43.0294316666667,-43.04094,-43.044425,-43.0424566666667,-43.032645,-43.01942,-43.0110583333333,-42.9957683333333,-42.9810416666667,-42.9723616666667,-42.9688766666667,-42.9620866666667,-42.97973,-42.9882883333333,-42.97929,-42.9744983333333,-42.969035,-42.95733,-42.9487666666667,-42.93547,-42.9180183333333,-42.90146,-42.8652733333333,-42.8887966666667,-42.9434566666667,-42.982315,-42.989605,-42.9674433333333,-42.987385,-43.0039116666667,-42.9996533333333,-42.9902683333333,-42.9750116666667,-42.948805,-42.920265,-42.88705,-42.8621066666667,-42.8392,-42.82073,-42.7825,-42.7372416666667,-42.6847,-42.6340366666667,-42.604805,-42.5597316666667,-42.505855,-42.43706,-42.3842966666667,-42.3420766666667,-42.31207,-42.3024166666667,-42.2744316666667,-42.23827,-42.1857116666667,-42.14432,-42.1009616666667,-42.0565566666667,-42.0123333333333,-41.962275,-41.91799,-41.898965,-41.8975216666667,-41.8792616666667,-41.832635,-41.7783033333333,-41.7284533333333,-41.6898716666667,-41.64471,-41.602615,-41.5631566666667,-41.5253133333333,-41.4993116666667,-41.5149833333333,-41.57254,-41.5824466666667,-41.5836333333333,-41.5831466666667,-41.593845,-41.5982666666667,-41.6005633333333,-41.5978716666667,-41.5988733333333,-41.59588,-41.5896916666667,-41.5808433333333,-41.5710533333333,-41.5632366666667,-41.55604,-41.5498666666667,-41.54063,-41.5327416666667,-41.5291383333333,-41.528915,-41.5315083333333,-41.5328466666667,-41.530665,-41.531975,-41.5399516666667,-41.539435,-41.53781,-41.5389033333333,-41.5427966666667,-41.543085,-41.5483316666667,-41.5432233333333,-41.5350466666667,-41.5245933333333,-41.5232666666667,-41.5232966666667,-41.5257583333333,-41.5223233333333,-41.5083066666667,-41.486815,-41.46507,-41.4484866666667,-41.43196,-41.4119616666667,-41.39236,-41.3720383333333,-41.3531,-41.3442183333333,-41.3439183333333,-41.34119,-41.3190966666667,-41.299955,-41.2824316666667,-41.2637883333333,-41.24143,-41.21495,-41.1555466666667,-41.08353,-41.072635,-41.0609866666667,-40.9830416666667,-40.8618466666667,-40.7475333333333,-40.62653,-40.5029933333333,-40.3749966666667,-40.2493583333333,-40.1281416666667,-39.9988566666667,-39.8752433333333,-39.761445,-39.643475,-39.561515,-39.5144733333333,-39.426375,-39.3413866666667,-39.2485616666667,-39.1550416666667,-39.0617566666667,-38.9806983333333,-38.897875,-38.80601,-38.7138716666667,-38.6792866666667,-38.6650633333333,-38.62756,-38.5594666666667,-38.4850966666667,-38.4239433333333,-38.37143,-38.3043933333333,-38.24651,-38.1994216666667,-38.1468716666667,-38.0950066666667,-38.0510233333333,-38.029675,-37.9864916666667,-37.9456766666667,-37.9056916666667,-37.8636016666667,-37.82631,-37.7921083333333,-37.75151,-37.7102916666667,-37.670925,-37.6819016666667,-37.6948033333333,-37.6771933333333,-37.613235,-37.5500483333333,-37.4845316666667,-37.4217133333333,-37.3586566666667,-37.30154,-37.23979,-37.1673366666667,-37.0954333333333,-37.0566466666667,-37.0320383333333,-36.99797,-36.9480383333333,-36.89528,-36.80887,-36.721815,-36.6335733333333,-36.53811,-36.461195,-36.3901933333333,-36.3227466666667,-36.3002583333333,-36.295845,-36.270825,-36.204785,-36.15193,-36.0966,-36.0268083333333,-35.9559366666667,-35.8812733333333,-35.8136683333333,-35.7418833333333,-35.6754316666667,-35.6051133333333,-35.533365,-35.4787533333333,-35.435405,-35.3399233333333,-35.2443466666667,-35.1499,-35.0616783333333,-34.9653633333333,-34.8667133333333,-34.76994,-34.6711633333333,-34.629205,-34.6286066666667,-34.6082616666667,-34.5132766666667,-34.410235,-34.3084816666667,-34.210525,-34.1091183333333,-34.00618,-33.904455,-33.805985,-33.7084266666667,-33.6250133333333,-33.6052533333333,-33.5733966666667,-33.4705616666667,-33.3662983333333,-33.2632266666667,-33.1768416666667,-33.0909016666667,-33.0083083333333,-32.92904,-32.8480533333333,-32.767275,-32.73936,-32.7433433333333,-32.7085033333333,-32.6370866666667,-32.5613616666667,-32.4824766666667,-32.4042016666667,-32.3374983333333,-32.273165,-32.208915,-32.1469733333333,-32.0872033333333,-32.0255166666667,-31.9646383333333,-31.9019,-31.9331316666667,-31.9226,-31.8780616666667,-31.8224416666667,-31.7617483333333,-31.7152933333333,-31.677925,-31.7067066666667,-31.7406633333333,-31.7724883333333,-31.7889683333333,-31.807695,-31.8343366666667,-31.86286,-31.8995516666667,-31.919175,-31.9556983333333,-31.96766,-31.9540483333333,-31.9456483333333,-31.9236266666667,-31.8342316666667,-31.75193,-31.7364483333333,-31.7626916666667,-31.7102066666667,-31.6577266666667,-31.6072466666667,-31.5498516666667,-31.4949083333333,-31.43214,-31.3679233333333,-31.3176733333333,-31.298745,-31.3156966666667,-31.3294416666667,-31.3191133333333,-31.2943833333333,-31.280195,-31.2632716666667,-31.2497466666667,-31.2235966666667,-31.2030383333333,-31.1846366666667,-31.1542066666667,-31.1298966666667,-31.1049116666667,-31.0968816666667,-31.0833916666667,-31.0545216666667,-31.05048,-31.0437116666667,-31.0352316666667,-31.0250333333333,-30.9760033333333,-30.9242416666667,-30.87256,-30.8163516666667,-30.7800216666667,-30.7694233333333,-30.7478166666667,-30.7257016666667,-30.6582066666667,-30.5934766666667,-30.5284716666667,-30.4625283333333,-30.4006616666667,-30.337665,-30.2695416666667,-30.198695,-30.1249916666667,-30.0520333333333,-30.00395,-29.9195266666667,-29.8358066666667,-29.759085,-29.67633,-29.5873983333333,-29.5294916666667,-29.4783566666667,-29.4237933333333,-29.3727883333333,-29.3551716666667,-29.344365,-29.3195233333333,-29.265115,-29.2026833333333,-29.1392083333333,-29.0696416666667,-29.0007116666667,-28.93686,-28.8682583333333,-28.8061083333333,-28.7560266666667,-28.731675,-28.6921883333333,-28.637765,-28.5814883333333,-28.5285866666667,-28.4573466666667,-28.3792633333333,-28.2997366666667,-28.21569,-28.13557,-28.06272,-27.9991533333333,-27.980885,-27.9574033333333,-27.9264083333333,-27.894225,-27.8640316666667,-27.8346783333333,-27.8044766666667,-27.7631816666667,-27.72544,-27.6904283333333,-27.6444783333333,-27.5883216666667,-27.5785083333333,-27.5698916666667,-27.5314666666667,-27.4961016666667,-27.464145,-27.433865,-27.4073866666667,-27.3777933333333,-27.3462466666667,-27.30942,-27.269275,-27.2334916666667,-27.2167083333333,-27.1946483333333,-27.1423433333333,-27.08232,-27.0106966666667,-26.9341,-26.8513816666667,-26.7794416666667,-26.7019466666667,-26.6229066666667,-26.5497433333333,-26.47894,-26.4868116666667,-26.4928,-26.4369616666667,-26.3501116666667,-26.26822,-26.1951716666667,-26.116705,-26.0403216666667,-25.9628583333333,-25.8860866666667,-25.8129516666667,-25.8027216666667,-25.8056183333333,-25.8051516666667,-25.8241933333333,-25.7555033333333,-25.6714683333333,-25.633855,-25.6068316666667,-25.5164883333333,-25.4241816666667,-25.331045,-25.2367916666667,-25.1372033333333,-25.0421916666667,-24.951525,-24.9613616666667,-24.92676,-24.8589733333333,-24.7730766666667,-24.6744833333333,-24.5839683333333,-24.48683,-24.3883633333333,-24.29068,-24.303685,-24.3115966666667,-24.2978233333333,-24.2186966666667,-24.149785,-24.0862783333333,-24.0210233333333,-23.9557533333333,-23.8864533333333,-23.8239533333333,-23.76299,-23.6916983333333,-23.6389833333333,-23.6745466666667,-23.71363,-23.664505,-23.6117766666667,-23.6022733333333,-23.5972883333333,-23.8444866666667,-23.76984,-23.6882166666667,-23.6091316666667,-23.5241366666667,-23.4388116666667,-23.3524116666667,-23.2499616666667,-23.1525566666667,-23.0673316666667,-22.990025,-22.91278,-22.8280966666667,-22.7381066666667,-22.6407233333333,-22.5326183333333,-22.4203516666667,-22.3042433333333,-22.1906116666667,-22.0777216666667,-21.9416766666667,-21.82421,-21.7064,-21.581725,-21.45911,-21.34219,-21.2311083333333,-21.1196266666667,-21.0153783333333,-20.9095216666667,-20.7893283333333,-20.66957,-20.5502083333333,-20.43563,-20.318735,-20.1980033333333,-20.0716966666667,-19.9419233333333,-19.8156233333333,-19.6874583333333,-19.557565,-19.445725,-19.3448583333333,-19.247915,-19.1467866666667,-19.0490116666667,-18.9558016666667,-18.8615233333333,-18.754595,-18.6213416666667,-18.4816466666667,-18.3430966666667,-18.3425483333333],[172.824395,172.966778333333,173.106246666667,173.247275,173.397586666667,173.502933333333,173.589833333333,173.682078333333,173.73209,173.743066666667,173.894963333333,174.04493,174.209765,174.377486666667,174.546445,174.710738333333,174.858553333333,175.017031666667,175.02909,174.99493,175.123196666667,175.273365,175.41883,175.547483333333,175.56829,175.700271666667,175.842846666667,175.99826,176.133445,176.267123333333,176.352213333333,176.342861666667,176.35139,176.41086,176.543101666667,176.65946,176.776735,176.900991666667,177.02303,177.151686666667,177.280821666667,177.419645,177.429826666667,177.432983333333,177.557456666667,177.675616666667,177.721536666667,177.766796666667,177.805726666667,177.913971666667,178.049308333333,178.19257,178.342016666667,178.487188333333,178.631973333333,178.775986666667,178.856008333333,178.875445,178.978766666667,179.080233333333,179.198021666667,179.32821,179.465173333333,179.604391666667,179.753356666667,179.906618333333,179.938393333333,179.970078333333,180.080258333333,180.215208333333,180.356188333333,180.503905,180.626698333333,180.768451666667,180.888608333333,181.018313333333,181.132176666667,181.25556,181.325015,182.600101666667,182.764288333333,182.941833333333,183.122891666667,183.303521666667,183.434545,183.38596,183.28118,183.234651666667,183.247468333333,183.27177,183.293618333333,183.32369,183.471931666667,183.577575,183.671971666667,183.778991666667,183.893693333333,184.022843333333,184.169411666667,184.326626666667,184.426656666667,184.51943,184.657023333333,184.81976,184.979106666667,185.146858333333,185.312753333333,185.483916666667,185.657653333333,185.827453333333,185.89901,185.925306666667,185.94538,186.0038,186.086841666667,186.187493333333,186.333163333333,186.50807,186.67413,186.831601666667,186.972158333333,187.102203333333,187.21071,187.308991666667,187.395963333333,187.45165,187.446078333333,187.582388333333,187.724496666667,187.863983333333,188.004658333333,188.139451666667,188.276005,188.40706,188.535003333333,188.66451,188.796781666667,188.825613333333,188.830905,188.969248333333,189.112371666667,189.251333333333,189.401656666667,189.551196666667,189.702295,189.873476666667,190.026356666667,190.154553333333,190.201953333333,190.252841666667,190.369063333333,190.518098333333,190.665455,190.81163,190.95264,191.081373333333,191.225526666667,191.381111666667,191.532886666667,191.555595,191.582945,191.666816666667,191.820413333333,191.97995,192.15382,192.332706666667,192.521075,192.715388333333,192.90043,193.042918333333,193.179661666667,193.304481666667,193.428538333333,193.530706666667,193.553721666667,193.665871666667,193.799476666667,193.941445,194.08289,194.227815,194.382685,194.530468333333,194.677281666667,194.667006666667,194.664718333333,194.638241666667,194.779993333333,194.929435,195.075666666667,195.218965,195.309391666667,195.387031666667,195.494466666667,195.620606666667,195.74635,195.836683333333,195.839065,195.790726666667,195.831225,195.902255,196.033838333333,196.176405,196.317451666667,196.457096666667,196.606878333333,196.749568333333,196.886265,196.906635,196.889291666667,196.938278333333,197.08616,197.229391666667,197.372061666667,197.495238333333,197.627791666667,197.765116666667,197.90809,198.047141666667,198.179648333333,198.307943333333,198.395801666667,198.49422,198.587145,198.736258333333,198.88014,199.029145,199.176788333333,199.330878333333,199.487626666667,199.647066666667,199.803458333333,199.841596666667,199.849828333333,199.935178333333,200.070261666667,200.202251666667,200.332553333333,200.466463333333,200.603236666667,200.742998333333,200.882748333333,201.024406666667,201.16815,201.29717,201.318618333333,201.405311666667,201.564745,201.721656666667,201.876325,202.031516666667,202.187963333333,202.343218333333,202.483176666667,202.634141666667,202.784175,202.84375,202.851776666667,202.895268333333,202.963623333333,203.063571666667,203.17923,203.299556666667,203.387176666667,203.498991666667,203.60991,203.733811666667,203.87057,203.984521666667,204.009751666667,204.05235,204.178805,204.315111666667,204.454735,204.603026666667,204.739968333333,204.883483333333,205.023616666667,205.143726666667,205.186335,205.215825,205.214941666667,205.207818333333,205.199835,205.205033333333,205.193753333333,205.171358333333,205.15175,205.134713333333,205.111621666667,205.105628333333,205.090856666667,205.079591666667,205.099691666667,205.088306666667,205.089683333333,205.087793333333,205.08648,205.083716666667,205.088985,205.093803333333,205.12134,205.186021666667,205.251271666667,205.276181666667,205.288003333333,205.30473,205.354571666667,205.418091666667,205.484675,205.560033333333,205.663401666667,205.769965,205.867431666667,205.97147,206.08037,206.182876666667,206.254426666667,206.315748333333,206.42519,206.532955,206.635711666667,206.736636666667,206.84889,206.95884,207.062966666667,207.174725,207.203905,207.222481666667,207.276376666667,207.397206666667,207.514116666667,207.636351666667,207.75243,207.862186666667,207.957343333333,208.057681666667,208.14359,208.210581666667,208.274768333333,208.308593333333,208.339361666667,208.372106666667,208.396856666667,208.41697,208.439631666667,208.464445,208.492573333333,208.572413333333,208.66022,208.746483333333,208.773693333333,208.778958333333,208.806646666667,208.8926,208.959461666667,209.04325,209.153095,209.26561,209.37291,209.47718,209.575273333333,209.672715,209.76565,209.854506666667,209.93443,209.999626666667,210.024223333333,210.048926666667,210.057953333333,210.057955,210.079701666667,210.098363333333,210.122413333333,210.140245,210.149745,210.158615,210.157801666667,210.135631666667,210.112701666667,210.07669,210.033593333333,209.99521,209.952893333333,209.914298333333,209.867165,209.824126666667,209.777678333333,209.755815,209.735146666667,209.701948333333,209.672533333333,209.6269,209.693871666667,209.776105,209.86204,209.947901666667,210.037626666667,210.126255,210.157421666667,210.152295,210.195966666667,210.291258333333,210.387103333333,210.481436666667,210.567845,210.647921666667,210.726265,210.800815,210.881048333333,210.957433333333,211.030938333333,211.10009,211.156896666667,211.146093333333,211.12968,211.094585,211.049021666667,211.001035,210.965815,210.934445,210.984095,211.06709,211.150536666667,211.173581666667,211.210973333333,211.292451666667,211.366275,211.440436666667,211.445771666667,211.498471666667,211.552778333333,211.64654,211.745605,211.797966666667,211.75277,211.70305,211.691568333333,211.741316666667,211.667286666667,211.590808333333,211.514515,211.446766666667,211.374963333333,211.302825,211.230346666667,211.176235,211.169893333333,211.190873333333,211.221328333333,211.280595,211.354668333333,211.443883333333,211.520511666667,211.590961666667,211.6972,211.788708333333,211.875305,211.978363333333,212.070453333333,212.181875,212.250775,212.291436666667,212.36806,212.455661666667,212.533908333333,212.61396,212.720785,212.766391666667,212.848326666667,212.947718333333,213.048625,213.106608333333,213.115261666667,213.122396666667,213.143933333333,213.20915,213.270136666667,213.334661666667,213.397673333333,213.465225,213.535426666667,213.606603333333,213.67817,213.749833333333,213.80671,213.847838333333,213.909675,213.977361666667,214.047335,214.115291666667,214.183771666667,214.233016666667,214.278256666667,214.321498333333,214.372515,214.388615,214.397598333333,214.393108333333,214.44721,214.49365,214.541545,214.59001,214.645716666667,214.700585,214.746118333333,214.795988333333,214.838391666667,214.831443333333,214.806401666667,214.855538333333,214.926436666667,214.993538333333,214.99945,214.988885,214.982921666667,214.968433333333,214.984006666667,215.022973333333,215.07181,215.07917,215.071621666667,215.157265,215.244231666667,215.326365,215.407351666667,215.496455,215.575736666667,215.650235,215.712003333333,215.771095,215.820705,215.823695,215.809291666667,215.776216666667,215.725541666667,215.67765,215.627998333333,215.577205,215.524008333333,215.469966666667,215.409685,215.344966666667,215.284011666667,215.271231666667,215.234095,215.191151666667,215.151518333333,215.106585,215.056696666667,214.999585,214.934831666667,214.880293333333,214.825626666667,214.772808333333,214.737346666667,214.700071666667,214.651325,214.589695,214.531018333333,214.472623333333,214.41827,214.357855,214.296901666667,214.232643333333,214.171735,214.11312,214.088818333333,214.080473333333,214.075468333333,214.066516666667,214.040516666667,214.011043333333,213.980156666667,213.950615,213.91524,213.882891666667,213.844898333333,213.802181666667,213.759941666667,213.72069,213.681973333333,213.660098333333,213.636215,213.606395,213.571185,213.53458,213.501963333333,213.46421,213.427368333333,213.391241666667,213.370583333333,213.359665,213.335383333333,213.294556666667,213.258021666667,213.219151666667,213.179208333333,213.141868333333,213.107983333333,213.078605,213.048846666667,213.015075,212.982873333333,212.974081666667,212.97288,212.929556666667,212.880245,212.80659,212.729403333333,212.325286666667,212.299081666667,212.264155,212.232235,212.18325,212.133418333333,212.082108333333,212.03409,212.0031,212.000933333333,211.984788333333,211.95262,211.906681666667,211.86047,211.816991666667,211.796978333333,211.77646,211.755053333333,211.737458333333,211.720178333333,211.689225,211.654386666667,211.604103333333,211.543141666667,211.480915,211.414391666667,211.341981666667,211.265791666667,211.185531666667,211.111888333333,211.072215,211.033625,210.985378333333,210.942933333333,210.899503333333,210.866971666667,210.846528333333,210.821616666667,210.782555,210.737103333333,210.69401,210.660765,210.651056666667,210.634003333333,210.62248,210.603801666667,210.582036666667,210.56421,210.550085,210.531221666667,210.511838333333,210.494891666667,210.472275],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["17.0558","17.4809","16.9475","15.9562","15.8244","15.2949","15.068","14.5624","14.4309","14.4888","13.7856","14.0036","14.1808","15.8552","15.5019","15.793","16.124","16.8159","16.7533","16.8204","16.4111","15.7734","15.9789","15.9868","15.7928","15.4232","15.1956","16.5219","16.8588","16.2444","15.8651","15.839","16.2959","16.0768","15.7637","16.2075","16.3268","16.4711","16.5638","16.2365","15.8459","16.118","16.2494","16.4018","16.2555","16.3597","16.323","16.2664","16.1665","15.878","16.0305","16.1565","15.9819","15.9947","16.0447","16.145","16.0229","16.3094","15.7565","15.7421","16.078","16.3558","16.4713","16.5417","16.3844","16.3592","16.6125","16.837","17.0158","16.8393","16.8671","17.0597","16.9004","16.5806","16.2675","16.3207","16.3797","16.3711","16.3992","16.3948","16.6274","15.783","15.7725","15.6337","16.1107","15.4874","15.3363","15.406","15.492","15.5283","15.5136","15.5375","15.5528","15.5565","15.5818","15.6292","15.7454","15.6108","15.5176","15.7967","15.9418","15.7597","15.7906","15.9446","15.87","15.815","16.0722","16.0127","15.9539","16.0284","16.0255","16.0462","16.4723","16.1229","16.108","16.1355","16.1649","16.045","16.4355","16.2065","15.8956","16.5673","16.4798","16.3637","16.1569","16.208","16.2499","16.2215","16.2317","16.2021","16.3228","16.3846","16.426","16.3996","16.4952","16.6781","16.406","16.4171","16.4429","16.5642","16.5983","16.5054","16.5031","16.497","16.4048","16.3333","16.342","16.4796","16.4364","16.3994","16.3068","16.2533","15.7126","16.1228","15.5978","15.5851","15.5213","15.6111","15.5816","15.6242","15.5946","15.7","15.7296","16.0254","15.9884","15.9025",null,"15.8223","16.0843","16.0385","15.9598","15.8148","15.8998","15.7524",null,"15.2501","15.1401","15.1357","15.0128","14.9506","14.9638","14.9523","15.142","15.0771","15.036","14.6807","14.9337","15.0104","15.0137","14.8532","15.2971","15.8014","16.0875","16.1393","16.0357","16.1225","16.1252","16.126","15.7506","15.7075","15.8138","15.72","15.6125","15.38","15.3666","15.3096","15.4392","15.5793","15.597","15.6403","15.7908","16.0201","16.0038","15.6498","15.707","15.9548","16.3076","16.3716","16.5729","16.5656","16.4358","16.4247","16.1984","16.0296","15.925","16.0084","15.9683","16.0417","16.066","15.9457","16.0098","16.0884","16.1693","16.2669","16.3824","16.5433","16.4423","16.6197","16.5709","16.5967","16.4778","16.3945","16.3628","16.3664","16.3504","16.4659","16.4127","16.4648","16.7924","16.8611","16.8199","16.8007","16.7861","16.7386","16.6493","16.7715","16.8209","16.9723","17.143","16.8581","16.985","16.7017","16.6866","16.603","16.6166","16.5898","16.6099","16.5273","16.5223","16.4528","16.5009","16.5053","16.4338","16.4182","16.3536","16.3655","16.3599","15.9058","15.7841",null,"15.6898","15.8465","16.186","16.4622","16.3204","16.0896","16.3741","17.6756","17.7722","18.0288","18.1324","18.2083","18.2146","18.0833","18.0874","18.0626","17.9805","18.0292","18.0085","17.9345","18.0251","18.2193","18.2578","18.1074","18.1095","18.0712","18.064","18.0805","17.7817","17.7296","17.7099","17.6627","17.3669","17.2754","17.322","17.4981","17.2503","17.3274","17.2932","17.4861","17.4113","17.8788","17.8801","17.8462","17.8671","17.7397","17.7299","17.799","17.7935","17.7731","17.7207","17.7202","17.8154","17.8378","17.7466","17.7933","17.8523","17.8476","17.9399","17.9179",null,null,null,null,null,null,null,null,"18.9656","18.9786","18.9726","19.02","19.1645","19.3707","19.521","19.5124","19.5048","19.5094","19.4485","19.4121","19.3665","19.3268","19.2681","19.0804","19.1213","19.1119","19.0643","19.5948","19.921","20.214","20.2592","20.2062","20.3359","20.3249","20.1187","20.2145","20.2805","20.3625","20.4154","20.4792","20.3826","20.7764","20.7981","20.6199","20.6303","20.6618","20.6667","20.6084","20.5724","20.5345","20.4661","20.5969","20.4915","20.4684","20.3849","20.3333","20.3405","20.3614","20.4428","20.5347","20.6517","20.9007","20.8864","21.0112","21.1875","21.3445","21.5887","21.3922","21.427","21.4229","21.1215","20.9857","20.972","20.8701","20.9118","20.8894","21.0083","21.1029","21.0537","21.056","21.0778","21.1312","20.9787","21.0076","21.2842","21.2361","21.1667","21.5209","21.525","21.412","21.314","21.3148","21.1964","21.2039","21.1996","21.3962","21.4804","21.3416","21.7506","21.9378","21.2999","21.2993","20.9306","20.8934","20.9785","21.0006","21.0253","21.044","21.0721","21.0462","21.0186","21.019","20.9969","20.975","21.0699","20.9711","22.2169","21.8883","22.1223","22.1163","22.384","22.0164","21.4023","21.6017","21.6538","21.5989","21.8806","21.9284","22.1609","22.2029","22.1736","22.1555","22.1582","22.1676","22.1862","21.979","22.2268","22.2439","22.5249","23.1483","23.341","23.3058","23.2794","23.2471","23.0297","22.9899","22.9723","22.7119","22.7018","22.5513","22.5117","22.645","22.6101","22.599","22.6295","22.7599","22.8328","22.8366","22.8734","22.8791","22.9239","22.8737","22.7347","23.5111","23.5161","23.5942","23.5568","23.5495","23.5309","23.6858","23.6313","23.8256","24.3641","24.4657","24.572","24.6414","24.6701","24.6335","24.5758","24.6418","24.6833","24.6237","24.6473","24.6662","24.6231","24.536","24.568","24.5763","24.5086","24.4734","24.4094","24.3964","24.3592","24.3418","24.3262","24.4007","24.3698","24.2951","24.2696","24.2997","24.2736","24.2538","24.2689","24.2713","24.3577","24.3719","24.3675","24.3354","24.3598","24.5045","24.9243","24.8729","25.0585","25.1681","24.9039","24.7933","25.0118","24.7635","24.8485","24.868","24.8545","24.6975","24.6381","24.7255","24.6505","24.6709","24.7444","24.8143","24.8196","24.8143","24.8069","24.7656","24.7748","24.7511","24.8347","24.9254","24.8353","24.7546","24.731","24.8921","24.9033","25.0135","25.1963","25.2068","25.0829","25.4818","25.6204","25.6213","25.6533","25.7499","25.7825","25.8199","25.8119","26.2995","26.2965","26.3616","26.4438","26.4667","26.4553","26.5211","26.7546","26.7259","26.7413","26.7156","26.7273","26.7664","26.8985","26.9527","27.0126","26.5714","26.7231","26.783","26.954","26.9742","27.1848","27.06","27.0897","27.1447","27.1177","26.9142","26.9746","27.0125","27.0188","26.9763","27.0507","27.2398","27.479","27.6959","27.8643","27.8366","27.9969","28.2223","28.2295","28.2584","28.2986","28.3124","28.2732","28.0873","28.0192","28.0723","28.0658","28.0899","28.0667","27.9104","28.0085","27.9981","27.983","28.2846","28.3138","28.5676","28.7198","28.5792","28.851","28.8813","28.8846","28.8854","28.8405","28.9683","28.9565","29.0367","29.0303","28.9554"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-44.1734766666667,-18.3425483333333],"lng":[172.824395,215.823695]}},"evals":[],"jsHooks":[]}</script>
<p>What is the mutate function doing? How does the <code>if_else()</code> function work? Try reading the help file with <code>?if_else()</code>. Note how the above map automagically shrank itself down to show only the area around our points. How can we control that? This help file <code>?setView</code> shows us most of the controls we will want. Let’s see if we can add one more line of code to the above example to better control how our map looks on startup. Try finding an island you like and have the map open up centred on it and zoomed in.</p>
<p>Now that we’ve mastered the zooming of our maps, let’s have a final look at some of the options available to use for how our markers look before we move on to <strong><code>Shiny</code></strong>. In the following example we can see how quickly the more powerful aspects of <strong><code>leaflet</code></strong> are available to us.</p>
<pre class="r"><code>df %&gt;% 
  mutate(lon = if_else(lon &lt; 0, lon+360, lon)) %&gt;% 
  leaflet() %&gt;% 
  addProviderTiles(providers$Esri.OceanBasemap) %&gt;% 
  addMarkers(clusterOptions = markerClusterOptions())</code></pre>
<pre><code>## Assuming &quot;lon&quot; and &quot;lat&quot; are longitude and latitude, respectively</code></pre>
<div id="htmlwidget-3" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[-43.591535,-43.5793166666667,-43.5868233333333,-43.56721,-43.546065,-43.5197433333333,-43.5014833333333,-43.4728033333333,-43.44571,-43.4238683333333,-43.41504,-43.408675,-43.4000733333333,-43.4017516666667,-43.4068283333333,-43.4040183333333,-43.396855,-43.39211,-43.3858433333333,-43.3823033333333,-43.37801,-43.3791316666667,-43.38287,-43.3781783333333,-43.3644616666667,-43.3579083333333,-43.3349666666667,-43.29299,-43.2446433333333,-43.1804383333333,-43.15089,-43.17568,-43.2002933333333,-43.194915,-43.2238133333333,-43.2552283333333,-43.2875783333333,-43.3229333333333,-43.36069,-43.4030816666667,-43.4547416666667,-43.49322,-43.506795,-43.52428,-43.5662166666667,-43.5876433333333,-43.5027416666667,-43.4154583333333,-43.3390816666667,-43.34457,-43.363605,-43.3788783333333,-43.3918233333333,-43.4016166666667,-43.4087516666667,-43.4139533333333,-43.4319833333333,-43.4658033333333,-43.479015,-43.4911966666667,-43.5075316666667,-43.5224916666667,-43.541715,-43.5614816666667,-43.5851333333333,-43.6040516666667,-43.6277966666667,-43.6518066666667,-43.670625,-43.6854783333333,-43.7008816666667,-43.7205983333333,-43.7412483333333,-43.7553133333333,-43.7683433333333,-43.7844283333333,-43.8002933333333,-43.81384,-43.8256366666667,-44.0844883333333,-44.0505533333333,-44.0184216666667,-43.98309,-43.9420983333333,-43.9316083333333,-43.9461766666667,-43.980885,-44.0480733333333,-44.0624333333333,-44.0609883333333,-44.11623,-44.1734766666667,-44.1633866666667,-44.1429583333333,-44.1265616666667,-44.1150683333333,-44.106185,-44.097055,-44.1005566666667,-44.097335,-44.0937466666667,-44.0793066666667,-44.0771283333333,-44.06812,-44.05528,-44.0426783333333,-44.0384583333333,-44.0312583333333,-44.02015,-43.9915133333333,-43.9810183333333,-43.9585966666667,-43.9270133333333,-43.8624966666667,-43.7841133333333,-43.7476516666667,-43.739025,-43.69237,-43.64761,-43.59813,-43.55443,-43.503865,-43.4509133333333,-43.39451,-43.35396,-43.32477,-43.31763,-43.2950833333333,-43.264945,-43.2356666666667,-43.2122933333333,-43.174465,-43.1350483333333,-43.0983116666667,-43.0643516666667,-43.0306116666667,-43.0005666666667,-43.0017366666667,-43.012445,-43.0256616666667,-43.0390783333333,-43.0540433333333,-43.06323,-43.0746516666667,-43.05813,-43.04307,-43.0309883333333,-43.0294316666667,-43.04094,-43.044425,-43.0424566666667,-43.032645,-43.01942,-43.0110583333333,-42.9957683333333,-42.9810416666667,-42.9723616666667,-42.9688766666667,-42.9620866666667,-42.97973,-42.9882883333333,-42.97929,-42.9744983333333,-42.969035,-42.95733,-42.9487666666667,-42.93547,-42.9180183333333,-42.90146,-42.8652733333333,-42.8887966666667,-42.9434566666667,-42.982315,-42.989605,-42.9674433333333,-42.987385,-43.0039116666667,-42.9996533333333,-42.9902683333333,-42.9750116666667,-42.948805,-42.920265,-42.88705,-42.8621066666667,-42.8392,-42.82073,-42.7825,-42.7372416666667,-42.6847,-42.6340366666667,-42.604805,-42.5597316666667,-42.505855,-42.43706,-42.3842966666667,-42.3420766666667,-42.31207,-42.3024166666667,-42.2744316666667,-42.23827,-42.1857116666667,-42.14432,-42.1009616666667,-42.0565566666667,-42.0123333333333,-41.962275,-41.91799,-41.898965,-41.8975216666667,-41.8792616666667,-41.832635,-41.7783033333333,-41.7284533333333,-41.6898716666667,-41.64471,-41.602615,-41.5631566666667,-41.5253133333333,-41.4993116666667,-41.5149833333333,-41.57254,-41.5824466666667,-41.5836333333333,-41.5831466666667,-41.593845,-41.5982666666667,-41.6005633333333,-41.5978716666667,-41.5988733333333,-41.59588,-41.5896916666667,-41.5808433333333,-41.5710533333333,-41.5632366666667,-41.55604,-41.5498666666667,-41.54063,-41.5327416666667,-41.5291383333333,-41.528915,-41.5315083333333,-41.5328466666667,-41.530665,-41.531975,-41.5399516666667,-41.539435,-41.53781,-41.5389033333333,-41.5427966666667,-41.543085,-41.5483316666667,-41.5432233333333,-41.5350466666667,-41.5245933333333,-41.5232666666667,-41.5232966666667,-41.5257583333333,-41.5223233333333,-41.5083066666667,-41.486815,-41.46507,-41.4484866666667,-41.43196,-41.4119616666667,-41.39236,-41.3720383333333,-41.3531,-41.3442183333333,-41.3439183333333,-41.34119,-41.3190966666667,-41.299955,-41.2824316666667,-41.2637883333333,-41.24143,-41.21495,-41.1555466666667,-41.08353,-41.072635,-41.0609866666667,-40.9830416666667,-40.8618466666667,-40.7475333333333,-40.62653,-40.5029933333333,-40.3749966666667,-40.2493583333333,-40.1281416666667,-39.9988566666667,-39.8752433333333,-39.761445,-39.643475,-39.561515,-39.5144733333333,-39.426375,-39.3413866666667,-39.2485616666667,-39.1550416666667,-39.0617566666667,-38.9806983333333,-38.897875,-38.80601,-38.7138716666667,-38.6792866666667,-38.6650633333333,-38.62756,-38.5594666666667,-38.4850966666667,-38.4239433333333,-38.37143,-38.3043933333333,-38.24651,-38.1994216666667,-38.1468716666667,-38.0950066666667,-38.0510233333333,-38.029675,-37.9864916666667,-37.9456766666667,-37.9056916666667,-37.8636016666667,-37.82631,-37.7921083333333,-37.75151,-37.7102916666667,-37.670925,-37.6819016666667,-37.6948033333333,-37.6771933333333,-37.613235,-37.5500483333333,-37.4845316666667,-37.4217133333333,-37.3586566666667,-37.30154,-37.23979,-37.1673366666667,-37.0954333333333,-37.0566466666667,-37.0320383333333,-36.99797,-36.9480383333333,-36.89528,-36.80887,-36.721815,-36.6335733333333,-36.53811,-36.461195,-36.3901933333333,-36.3227466666667,-36.3002583333333,-36.295845,-36.270825,-36.204785,-36.15193,-36.0966,-36.0268083333333,-35.9559366666667,-35.8812733333333,-35.8136683333333,-35.7418833333333,-35.6754316666667,-35.6051133333333,-35.533365,-35.4787533333333,-35.435405,-35.3399233333333,-35.2443466666667,-35.1499,-35.0616783333333,-34.9653633333333,-34.8667133333333,-34.76994,-34.6711633333333,-34.629205,-34.6286066666667,-34.6082616666667,-34.5132766666667,-34.410235,-34.3084816666667,-34.210525,-34.1091183333333,-34.00618,-33.904455,-33.805985,-33.7084266666667,-33.6250133333333,-33.6052533333333,-33.5733966666667,-33.4705616666667,-33.3662983333333,-33.2632266666667,-33.1768416666667,-33.0909016666667,-33.0083083333333,-32.92904,-32.8480533333333,-32.767275,-32.73936,-32.7433433333333,-32.7085033333333,-32.6370866666667,-32.5613616666667,-32.4824766666667,-32.4042016666667,-32.3374983333333,-32.273165,-32.208915,-32.1469733333333,-32.0872033333333,-32.0255166666667,-31.9646383333333,-31.9019,-31.9331316666667,-31.9226,-31.8780616666667,-31.8224416666667,-31.7617483333333,-31.7152933333333,-31.677925,-31.7067066666667,-31.7406633333333,-31.7724883333333,-31.7889683333333,-31.807695,-31.8343366666667,-31.86286,-31.8995516666667,-31.919175,-31.9556983333333,-31.96766,-31.9540483333333,-31.9456483333333,-31.9236266666667,-31.8342316666667,-31.75193,-31.7364483333333,-31.7626916666667,-31.7102066666667,-31.6577266666667,-31.6072466666667,-31.5498516666667,-31.4949083333333,-31.43214,-31.3679233333333,-31.3176733333333,-31.298745,-31.3156966666667,-31.3294416666667,-31.3191133333333,-31.2943833333333,-31.280195,-31.2632716666667,-31.2497466666667,-31.2235966666667,-31.2030383333333,-31.1846366666667,-31.1542066666667,-31.1298966666667,-31.1049116666667,-31.0968816666667,-31.0833916666667,-31.0545216666667,-31.05048,-31.0437116666667,-31.0352316666667,-31.0250333333333,-30.9760033333333,-30.9242416666667,-30.87256,-30.8163516666667,-30.7800216666667,-30.7694233333333,-30.7478166666667,-30.7257016666667,-30.6582066666667,-30.5934766666667,-30.5284716666667,-30.4625283333333,-30.4006616666667,-30.337665,-30.2695416666667,-30.198695,-30.1249916666667,-30.0520333333333,-30.00395,-29.9195266666667,-29.8358066666667,-29.759085,-29.67633,-29.5873983333333,-29.5294916666667,-29.4783566666667,-29.4237933333333,-29.3727883333333,-29.3551716666667,-29.344365,-29.3195233333333,-29.265115,-29.2026833333333,-29.1392083333333,-29.0696416666667,-29.0007116666667,-28.93686,-28.8682583333333,-28.8061083333333,-28.7560266666667,-28.731675,-28.6921883333333,-28.637765,-28.5814883333333,-28.5285866666667,-28.4573466666667,-28.3792633333333,-28.2997366666667,-28.21569,-28.13557,-28.06272,-27.9991533333333,-27.980885,-27.9574033333333,-27.9264083333333,-27.894225,-27.8640316666667,-27.8346783333333,-27.8044766666667,-27.7631816666667,-27.72544,-27.6904283333333,-27.6444783333333,-27.5883216666667,-27.5785083333333,-27.5698916666667,-27.5314666666667,-27.4961016666667,-27.464145,-27.433865,-27.4073866666667,-27.3777933333333,-27.3462466666667,-27.30942,-27.269275,-27.2334916666667,-27.2167083333333,-27.1946483333333,-27.1423433333333,-27.08232,-27.0106966666667,-26.9341,-26.8513816666667,-26.7794416666667,-26.7019466666667,-26.6229066666667,-26.5497433333333,-26.47894,-26.4868116666667,-26.4928,-26.4369616666667,-26.3501116666667,-26.26822,-26.1951716666667,-26.116705,-26.0403216666667,-25.9628583333333,-25.8860866666667,-25.8129516666667,-25.8027216666667,-25.8056183333333,-25.8051516666667,-25.8241933333333,-25.7555033333333,-25.6714683333333,-25.633855,-25.6068316666667,-25.5164883333333,-25.4241816666667,-25.331045,-25.2367916666667,-25.1372033333333,-25.0421916666667,-24.951525,-24.9613616666667,-24.92676,-24.8589733333333,-24.7730766666667,-24.6744833333333,-24.5839683333333,-24.48683,-24.3883633333333,-24.29068,-24.303685,-24.3115966666667,-24.2978233333333,-24.2186966666667,-24.149785,-24.0862783333333,-24.0210233333333,-23.9557533333333,-23.8864533333333,-23.8239533333333,-23.76299,-23.6916983333333,-23.6389833333333,-23.6745466666667,-23.71363,-23.664505,-23.6117766666667,-23.6022733333333,-23.5972883333333,-23.8444866666667,-23.76984,-23.6882166666667,-23.6091316666667,-23.5241366666667,-23.4388116666667,-23.3524116666667,-23.2499616666667,-23.1525566666667,-23.0673316666667,-22.990025,-22.91278,-22.8280966666667,-22.7381066666667,-22.6407233333333,-22.5326183333333,-22.4203516666667,-22.3042433333333,-22.1906116666667,-22.0777216666667,-21.9416766666667,-21.82421,-21.7064,-21.581725,-21.45911,-21.34219,-21.2311083333333,-21.1196266666667,-21.0153783333333,-20.9095216666667,-20.7893283333333,-20.66957,-20.5502083333333,-20.43563,-20.318735,-20.1980033333333,-20.0716966666667,-19.9419233333333,-19.8156233333333,-19.6874583333333,-19.557565,-19.445725,-19.3448583333333,-19.247915,-19.1467866666667,-19.0490116666667,-18.9558016666667,-18.8615233333333,-18.754595,-18.6213416666667,-18.4816466666667,-18.3430966666667,-18.3425483333333],[172.824395,172.966778333333,173.106246666667,173.247275,173.397586666667,173.502933333333,173.589833333333,173.682078333333,173.73209,173.743066666667,173.894963333333,174.04493,174.209765,174.377486666667,174.546445,174.710738333333,174.858553333333,175.017031666667,175.02909,174.99493,175.123196666667,175.273365,175.41883,175.547483333333,175.56829,175.700271666667,175.842846666667,175.99826,176.133445,176.267123333333,176.352213333333,176.342861666667,176.35139,176.41086,176.543101666667,176.65946,176.776735,176.900991666667,177.02303,177.151686666667,177.280821666667,177.419645,177.429826666667,177.432983333333,177.557456666667,177.675616666667,177.721536666667,177.766796666667,177.805726666667,177.913971666667,178.049308333333,178.19257,178.342016666667,178.487188333333,178.631973333333,178.775986666667,178.856008333333,178.875445,178.978766666667,179.080233333333,179.198021666667,179.32821,179.465173333333,179.604391666667,179.753356666667,179.906618333333,179.938393333333,179.970078333333,180.080258333333,180.215208333333,180.356188333333,180.503905,180.626698333333,180.768451666667,180.888608333333,181.018313333333,181.132176666667,181.25556,181.325015,182.600101666667,182.764288333333,182.941833333333,183.122891666667,183.303521666667,183.434545,183.38596,183.28118,183.234651666667,183.247468333333,183.27177,183.293618333333,183.32369,183.471931666667,183.577575,183.671971666667,183.778991666667,183.893693333333,184.022843333333,184.169411666667,184.326626666667,184.426656666667,184.51943,184.657023333333,184.81976,184.979106666667,185.146858333333,185.312753333333,185.483916666667,185.657653333333,185.827453333333,185.89901,185.925306666667,185.94538,186.0038,186.086841666667,186.187493333333,186.333163333333,186.50807,186.67413,186.831601666667,186.972158333333,187.102203333333,187.21071,187.308991666667,187.395963333333,187.45165,187.446078333333,187.582388333333,187.724496666667,187.863983333333,188.004658333333,188.139451666667,188.276005,188.40706,188.535003333333,188.66451,188.796781666667,188.825613333333,188.830905,188.969248333333,189.112371666667,189.251333333333,189.401656666667,189.551196666667,189.702295,189.873476666667,190.026356666667,190.154553333333,190.201953333333,190.252841666667,190.369063333333,190.518098333333,190.665455,190.81163,190.95264,191.081373333333,191.225526666667,191.381111666667,191.532886666667,191.555595,191.582945,191.666816666667,191.820413333333,191.97995,192.15382,192.332706666667,192.521075,192.715388333333,192.90043,193.042918333333,193.179661666667,193.304481666667,193.428538333333,193.530706666667,193.553721666667,193.665871666667,193.799476666667,193.941445,194.08289,194.227815,194.382685,194.530468333333,194.677281666667,194.667006666667,194.664718333333,194.638241666667,194.779993333333,194.929435,195.075666666667,195.218965,195.309391666667,195.387031666667,195.494466666667,195.620606666667,195.74635,195.836683333333,195.839065,195.790726666667,195.831225,195.902255,196.033838333333,196.176405,196.317451666667,196.457096666667,196.606878333333,196.749568333333,196.886265,196.906635,196.889291666667,196.938278333333,197.08616,197.229391666667,197.372061666667,197.495238333333,197.627791666667,197.765116666667,197.90809,198.047141666667,198.179648333333,198.307943333333,198.395801666667,198.49422,198.587145,198.736258333333,198.88014,199.029145,199.176788333333,199.330878333333,199.487626666667,199.647066666667,199.803458333333,199.841596666667,199.849828333333,199.935178333333,200.070261666667,200.202251666667,200.332553333333,200.466463333333,200.603236666667,200.742998333333,200.882748333333,201.024406666667,201.16815,201.29717,201.318618333333,201.405311666667,201.564745,201.721656666667,201.876325,202.031516666667,202.187963333333,202.343218333333,202.483176666667,202.634141666667,202.784175,202.84375,202.851776666667,202.895268333333,202.963623333333,203.063571666667,203.17923,203.299556666667,203.387176666667,203.498991666667,203.60991,203.733811666667,203.87057,203.984521666667,204.009751666667,204.05235,204.178805,204.315111666667,204.454735,204.603026666667,204.739968333333,204.883483333333,205.023616666667,205.143726666667,205.186335,205.215825,205.214941666667,205.207818333333,205.199835,205.205033333333,205.193753333333,205.171358333333,205.15175,205.134713333333,205.111621666667,205.105628333333,205.090856666667,205.079591666667,205.099691666667,205.088306666667,205.089683333333,205.087793333333,205.08648,205.083716666667,205.088985,205.093803333333,205.12134,205.186021666667,205.251271666667,205.276181666667,205.288003333333,205.30473,205.354571666667,205.418091666667,205.484675,205.560033333333,205.663401666667,205.769965,205.867431666667,205.97147,206.08037,206.182876666667,206.254426666667,206.315748333333,206.42519,206.532955,206.635711666667,206.736636666667,206.84889,206.95884,207.062966666667,207.174725,207.203905,207.222481666667,207.276376666667,207.397206666667,207.514116666667,207.636351666667,207.75243,207.862186666667,207.957343333333,208.057681666667,208.14359,208.210581666667,208.274768333333,208.308593333333,208.339361666667,208.372106666667,208.396856666667,208.41697,208.439631666667,208.464445,208.492573333333,208.572413333333,208.66022,208.746483333333,208.773693333333,208.778958333333,208.806646666667,208.8926,208.959461666667,209.04325,209.153095,209.26561,209.37291,209.47718,209.575273333333,209.672715,209.76565,209.854506666667,209.93443,209.999626666667,210.024223333333,210.048926666667,210.057953333333,210.057955,210.079701666667,210.098363333333,210.122413333333,210.140245,210.149745,210.158615,210.157801666667,210.135631666667,210.112701666667,210.07669,210.033593333333,209.99521,209.952893333333,209.914298333333,209.867165,209.824126666667,209.777678333333,209.755815,209.735146666667,209.701948333333,209.672533333333,209.6269,209.693871666667,209.776105,209.86204,209.947901666667,210.037626666667,210.126255,210.157421666667,210.152295,210.195966666667,210.291258333333,210.387103333333,210.481436666667,210.567845,210.647921666667,210.726265,210.800815,210.881048333333,210.957433333333,211.030938333333,211.10009,211.156896666667,211.146093333333,211.12968,211.094585,211.049021666667,211.001035,210.965815,210.934445,210.984095,211.06709,211.150536666667,211.173581666667,211.210973333333,211.292451666667,211.366275,211.440436666667,211.445771666667,211.498471666667,211.552778333333,211.64654,211.745605,211.797966666667,211.75277,211.70305,211.691568333333,211.741316666667,211.667286666667,211.590808333333,211.514515,211.446766666667,211.374963333333,211.302825,211.230346666667,211.176235,211.169893333333,211.190873333333,211.221328333333,211.280595,211.354668333333,211.443883333333,211.520511666667,211.590961666667,211.6972,211.788708333333,211.875305,211.978363333333,212.070453333333,212.181875,212.250775,212.291436666667,212.36806,212.455661666667,212.533908333333,212.61396,212.720785,212.766391666667,212.848326666667,212.947718333333,213.048625,213.106608333333,213.115261666667,213.122396666667,213.143933333333,213.20915,213.270136666667,213.334661666667,213.397673333333,213.465225,213.535426666667,213.606603333333,213.67817,213.749833333333,213.80671,213.847838333333,213.909675,213.977361666667,214.047335,214.115291666667,214.183771666667,214.233016666667,214.278256666667,214.321498333333,214.372515,214.388615,214.397598333333,214.393108333333,214.44721,214.49365,214.541545,214.59001,214.645716666667,214.700585,214.746118333333,214.795988333333,214.838391666667,214.831443333333,214.806401666667,214.855538333333,214.926436666667,214.993538333333,214.99945,214.988885,214.982921666667,214.968433333333,214.984006666667,215.022973333333,215.07181,215.07917,215.071621666667,215.157265,215.244231666667,215.326365,215.407351666667,215.496455,215.575736666667,215.650235,215.712003333333,215.771095,215.820705,215.823695,215.809291666667,215.776216666667,215.725541666667,215.67765,215.627998333333,215.577205,215.524008333333,215.469966666667,215.409685,215.344966666667,215.284011666667,215.271231666667,215.234095,215.191151666667,215.151518333333,215.106585,215.056696666667,214.999585,214.934831666667,214.880293333333,214.825626666667,214.772808333333,214.737346666667,214.700071666667,214.651325,214.589695,214.531018333333,214.472623333333,214.41827,214.357855,214.296901666667,214.232643333333,214.171735,214.11312,214.088818333333,214.080473333333,214.075468333333,214.066516666667,214.040516666667,214.011043333333,213.980156666667,213.950615,213.91524,213.882891666667,213.844898333333,213.802181666667,213.759941666667,213.72069,213.681973333333,213.660098333333,213.636215,213.606395,213.571185,213.53458,213.501963333333,213.46421,213.427368333333,213.391241666667,213.370583333333,213.359665,213.335383333333,213.294556666667,213.258021666667,213.219151666667,213.179208333333,213.141868333333,213.107983333333,213.078605,213.048846666667,213.015075,212.982873333333,212.974081666667,212.97288,212.929556666667,212.880245,212.80659,212.729403333333,212.325286666667,212.299081666667,212.264155,212.232235,212.18325,212.133418333333,212.082108333333,212.03409,212.0031,212.000933333333,211.984788333333,211.95262,211.906681666667,211.86047,211.816991666667,211.796978333333,211.77646,211.755053333333,211.737458333333,211.720178333333,211.689225,211.654386666667,211.604103333333,211.543141666667,211.480915,211.414391666667,211.341981666667,211.265791666667,211.185531666667,211.111888333333,211.072215,211.033625,210.985378333333,210.942933333333,210.899503333333,210.866971666667,210.846528333333,210.821616666667,210.782555,210.737103333333,210.69401,210.660765,210.651056666667,210.634003333333,210.62248,210.603801666667,210.582036666667,210.56421,210.550085,210.531221666667,210.511838333333,210.494891666667,210.472275],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-44.1734766666667,-18.3425483333333],"lng":[172.824395,215.823695]}},"evals":[],"jsHooks":[]}</script>
<p>What is the code in the above chunk doing, and when would this be useful? What options are available to us to further change our markers?</p>
</div>
<div id="section-shiny" class="section level2">
<h2>Shiny</h2>
<p><strong><code>Shiny</code></strong> is an incredibly powerful tool with almost no real limitations. If you can think of something, you can probably create it. To get the full crash course on the basics of Shiny there is a 2.5 hours <a href="https://shiny.rstudio.com/tutorial/">video</a> from one of the creators, but I assume we’d rather just jump right in. The first thing we need to know about Shiny is that it requires an active server to be running it. This means that <strong><code>Shiny</code></strong> apps cannot be hosted on a static HTML page, like the one we are looking at now. There is a solution to this problem built into RStudio that we will discuss at the end of this workshop. For the rest of this workshop however this means that we will need to be copying and pasting the code from this HTML document into an R script to run it. So please go ahead and create a new blank R script and save it as ‘app.R’ in the same folder where you have been saving the rest of your SEA resources. If however we are working from the RMarkdown file used to create this HTML document we may run the <strong><code>Shiny</code></strong> apps directly from that by clicking the green play buttons in the corners of each chunk. This works because our computers are serving the app for us.</p>
<p>The second thing we need to know about <strong><code>Shiny</code></strong> before we get started is that it is a different way of thinking about programming to what we may be used to with base R. We’ll slowly ease into what this means with examples as we go along. The most apparent difference is that in a <strong><code>Shiny</code></strong> script there is a section at the top for the <code>ui</code> and a section at the bottom for the <code>server</code>. The <code>ui</code> is a function we will create that contains all of the bits we want our users to see. The <code>server</code> is where the calculations will be happening. Below is a basic app that allows us to control the number of bins on a histogram that shows us the temperature data from the SEA cruise we’ve been working with. I know it looks daunting, but take some time to work through each line and see if you can make sense of it. Remember that the indentations of the functions and brackets help us to see what belongs to where.</p>
<pre class="r"><code># Define UI for application that draws a histogram
ui &lt;- fluidPage(

    # Application title
    titlePanel(&quot;SEA Temperature data&quot;),

    # Sidebar with a slider input for number of bins 
    sidebarLayout(
        sidebarPanel(
            sliderInput(inputId = &quot;bins&quot;,
                        label = &quot;Number of bins:&quot;,
                        min = 1,
                        max = 50,
                        value = 30)
        ),

        # Show the histogram created below in the server
        mainPanel(
           plotOutput(&quot;histPlot&quot;)
        )
    )
)

# Define server logic required to draw a histogram
server &lt;- function(input, output) {

    output$histPlot &lt;- renderPlot({
        # Draw a histogram with the specified number of bins
        # Bins based on input$bins from the ui above
        ggplot(data = df, aes(x = temp)) +
          geom_histogram(bins = input$bins) +
          labs(x = &quot;Temperature (°C)&quot;)
    })
}

# Run the application 
shinyApp(ui = ui, server = server)</code></pre>
<p>Now that we’ve puzzled through the code to create a histogram, let’s kick it up a notch. The next thing we want to create together is a <strong><code>Shiny</code></strong> app that allows us to create a scatterplot of the different variables in the SEA data.</p>
<pre class="r"><code># The UI
ui &lt;- fluidPage(

    # Application title
    titlePanel(&quot;SEA data&quot;),

    # Sidebar
    sidebarLayout(
        sidebarPanel(
          # Choices for x-axis
            selectInput(inputId = &quot;xaxis&quot;,
                        label = &quot;X-axis:&quot;, 
                        choices = colnames(df),
                        selected = &quot;temp&quot;),
            # Choices for y-axis
            selectInput(inputId = &quot;yaxis&quot;,
                        label = &quot;Y-axis:&quot;, 
                        choices = colnames(df),
                        selected = &quot;sal&quot;)
            
        ),

        # Show the scatterplot
        mainPanel(
           plotOutput(&quot;scatterPlot&quot;)
        )
    )
)

# The server
server &lt;- function(input, output) {

    output$scatterPlot &lt;- renderPlot({
        ggplot(data = df, aes_string(x = input$xaxis, y = input$yaxis)) +
          geom_point()
    })
}

# Run the application 
shinyApp(ui = ui, server = server)</code></pre>
<p>How does this differ from the previous <strong><code>Shiny</code></strong> app we looked at? How was it we went about adding a second menu option? How could we add a third menu option that changes the colour of the points based on a third variable? To see the full list of widgets available for apps go <a href="https://shiny.rstudio.com/gallery/widget-gallery.html">here</a>, and to see a range of extra widgets that do all sorts of neat things, run the following code in your terminal <code>shinyWidgets::shinyWidgetsGallery()</code>. It will require the <strong><code>shinyWidgets</code></strong> package to be installed.</p>
</div>
<div id="section-both" class="section level2">
<h2>Both</h2>
<p>We’ll end today’s workshop by seeing how we can run a <strong><code>leaflet</code></strong> map from a <strong><code>Shiny</code></strong> app. Because all of these things are ported into R with the same basic principles it all moves smoothly together. Below is the code chunk necessary to perform our goal. Let’s go through it together and see how we can change it to look more like what we may want.</p>
<pre class="r"><code># First let&#39;s fix up the df here so we don&#39;t have to do it inside of the app
df_fix &lt;- df %&gt;% 
    na.omit() %&gt;% 
    mutate(lon = if_else(lon &lt; 0, lon+360, lon))

# Next we decide on what we want our colour palette to look like
# Google RColorBrewer for a list of options
pal &lt;- colorNumeric(
  palette = &quot;YlOrRd&quot;,
  domain = df_fix$temp)

# The UI
ui &lt;- bootstrapPage(
  
  # This is a CSS info string, don&#39;t worry about this too much for now
  tags$style(type = &quot;text/css&quot;, &quot;html, body {width:100%;height:100%}&quot;),
    
  # This is where the leaflet map is shown in the UI
  leafletOutput(&quot;map&quot;, width = &quot;100%&quot;, height = &quot;100%&quot;),
  
  # This is where we may put our widgets
  # FOr this app we are only using a slider for now
  absolutePanel(top = 10, right = 10,
                sliderInput(inputId = &quot;range&quot;, 
                            label = &quot;Temperature&quot;, 
                            min = floor(min(df_fix$temp)), 
                            max = ceiling(max(df_fix$temp)),
                            value = c(floor(min(df_fix$temp)),
                                      ceiling(max(df_fix$temp))), 
                            step = 1)
    )
)

server &lt;- function(input, output, session) {
    
    # Reactive expression for the data subsetted to what the user selects
    filteredData &lt;- reactive({
        df_fix %&gt;%
            filter(temp &gt;= input$range[1],
                   temp &lt;= input$range[2])
    })
    
    # Only include map parts that won&#39;t need to change dynamically
    output$map &lt;- renderLeaflet({
        leaflet(df_fix) %&gt;% 
            addTiles() %&gt;%
            setView(lng = 200, lat = -30, zoom = 4) %&gt;% 
            addLegend(position = &quot;bottomright&quot;, pal = pal, values = ~temp)
    })
    
    # Changes to the map, such as filtering out temperatures, should be performed in an observer
    # Each independent set of things that can change should be managed in its own observer
    observe({
        leafletProxy(&quot;map&quot;) %&gt;%
            clearShapes() %&gt;%
            addCircles(data = filteredData(),
                       lng = ~lon, lat = ~lat, radius = 5000,
                       color = ~pal(temp), fillOpacity = 0.7, 
                       popup = ~paste0(&quot;Temp = &quot;, round(temp, 2), &quot;°C&quot;,
                                       &quot;&lt;br&gt;Time = &quot;, dttm))
    })
}
shinyApp(ui = ui, server = server)</code></pre>
</div>
<div id="section-conclusion" class="section level2">
<h2>Conclusion</h2>
<p>This has been a very brief introduction into what is possible with <strong><code>leaflet</code></strong> and <strong><code>Shiny</code></strong>. Hopefully this has served to spark some interest into the interactive capabilities of R. There is much more that can be done and for inspiration I would recommend checking <a href="https://shiny.rstudio.com/gallery/">here</a>. When we first started talking about <strong><code>Shiny</code></strong> apps I mentioned that it was possible to host them online. To do this, the next time you run your app, look in the top right corner. You’ll see a little blue icon that looks sort of like an eye. Click on that and it will walk you through the process. Now go out there and make something awesome!</p>
</div>
